metadata:
  title: Set up AssemblyLine automated testing for your docassemble package
  short title: Set up AL testing
  comment: Test the automated integrated testing library for AssemblyLine
---
modules:
  - .al_set_up_testing
---
objects:
  - installer: TestInstaller
---
mandatory: True
code: |
  # TODO
  # âˆšset_github_auth()
  # send_secrets()
  # create_branch()
  # make_pull_request()
  
  intro
  installer.token
  installer.set_github_auth()
  
  #user_interview_url
  #installer.set_server_info( user_interview_url )
---
id: intro
question: |
  Welcome
subquestion: |
  This interview will help you set up automated integrated GitHub testing for your docassemble project.
  
  :clock: This could take about 30 minutes
  
  We will need to add some files to different folders in your interview's GitHub repository:
  
  1. `.github/workflows/run_interview_tests.yml` tells GitHub when and how to run the tests.
  1. `package.json` tells GitHub what packages the tests need.
  1. `tests/features/example_test.feature` is a very simple example of a test.
  1. `.gitignore` is for developers who want to work in their local environment.
  1. `.env-example` is for developers who want to work in their local environment.
  
  To do that, we will need you to do these things:
  
  1. Make an account on your docassemble server that will do the testing. You can use your own account.
  1. Give us the authentication information for that account.
  1. Give us the url of the interview when it's being run from the Playground.
  1. Give us that interview's GitHub repository's url address.
  1. [Create a GitHub personal access token for your GitHub account](https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token).
  1. Give us that personal access token.
  
continue button field: intro
---
id: github auth
question: |
  GitHub authorization
subquestion: |
  In order to change files in your GitHub repository, we need your permission. This information will be encrypted end-to-end and on the server. No one other than you will have access to it.
fields:
  - Username: installer.user_name
  - Repo name: installer.repo_name
  - Personal access token: installer.token
    datatype: password
---
id: server info
question: |
  What is your interview's address?
subquestion: |
  Hit 'Save and Run' in your YAML file. What is in the url?
fields:
  - URL address: user_interview_url
---